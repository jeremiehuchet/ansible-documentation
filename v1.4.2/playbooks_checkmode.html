<?php
require('../wp-blog-header.php');
get_header();
?>

<div class="row">
	<div class="container">
		<?php if (function_exists('bootstrapwp_breadcrumbs')) bootstrapwp_breadcrumbs(); ?>
	</div><!--/.container -->
</div><!--/.row -->








<div class="container doc-content">
<div class="row clear-both">
    <!-- BEGIN LEFT-SIDEBAR -->
    
<div id="left-sidebar" class="span3 sidebar">
    <div class="side-nav sidebar-block left-side-nav">
      <ul><li><a href="/docs/"><strong>Documentation Home</strong></a></li></ul>
        
                <ul>
<li><a class="reference internal" href="#">Check Mode (&#8220;Dry Run&#8221;)</a><ul>
<li><a class="reference internal" href="#running-a-task-in-check-mode">Running a task in check mode</a></li>
<li><a class="reference internal" href="#showing-differences-with-diff">Showing Differences with &#8211;diff</a></li>
</ul>
</li>
</ul>

        
      <hr />
      <div class="qsButton pagination-centered" />
        <a href="/quickstart"><button class="btn btn-primary" type="button">Quick Start Video</button></a>
      </div>
    </div>
</div>

    <!-- END LEFT-SIDEBAR -->
     <!-- BEGIN ARTICLE CONTENT AREA -->
    <div class="span8 main-column two-columns-left">
        
  <div class="section" id="check-mode-dry-run">
<h1><a class="toc-backref" href="#id1">Check Mode (&#8220;Dry Run&#8221;)</a><a class="headerlink" href="#check-mode-dry-run" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#check-mode-dry-run" id="id1">Check Mode (&#8220;Dry Run&#8221;)</a><ul>
<li><a class="reference internal" href="#running-a-task-in-check-mode" id="id2">Running a task in check mode</a></li>
<li><a class="reference internal" href="#showing-differences-with-diff" id="id3">Showing Differences with &#8211;diff</a></li>
</ul>
</li>
</ul>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.1.</span></p>
</div>
<p>When ansible-playbook is executed with &#8211;check it will not make any changes on remote systems.  Instead, any module
instrumented to support &#8216;check mode&#8217; (which contains most of the primary core modules, but it is not required that all modules do
this) will report what changes they would have made rather than making them.  Other modules that do not support check mode will also take no action, but just will not report what changes they might have made.</p>
<p>Check mode is just a simulation, and if you have steps that use conditionals that depend on the results of prior commands,
it may be less useful for you.  However it is great for one-node-at-time basic configuration management use cases.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>ansible-playbook foo.yml --check
</pre></div>
</div>
<div class="section" id="running-a-task-in-check-mode">
<span id="forcing-to-run-in-check-mode"></span><h2><a class="toc-backref" href="#id2">Running a task in check mode</a><a class="headerlink" href="#running-a-task-in-check-mode" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.3.</span></p>
</div>
<p>Sometimes you may want to have a task to be executed even in check
mode. To achieve this, use the <cite>always_run</cite> clause on the task. Its
value is a Jinja2 expression, just like the <cite>when</cite> clause. In simple
cases a boolean YAML value would be sufficient as a value.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>tasks:

  - name: this task is run even in check mode
    command: /something/to/run --even-in-check-mode
    always_run: yes
</pre></div>
</div>
<p>As a reminder, a task with a <cite>when</cite> clause evaluated to false, will
still be skipped even if it has a <cite>always_run</cite> clause evaluated to
true.</p>
</div>
<div class="section" id="showing-differences-with-diff">
<span id="diff-mode"></span><h2><a class="toc-backref" href="#id3">Showing Differences with &#8211;diff</a><a class="headerlink" href="#showing-differences-with-diff" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.1.</span></p>
</div>
<p>The &#8211;diff option to ansible-playbook works great with &#8211;check (detailed above) but can also be used by itself.  When this flag is supplied, if any templated files on the remote system are changed, and the ansible-playbook CLI will report back
the textual changes made to the file (or, if used with &#8211;check, the changes that would have been made).  Since the diff
feature produces a large amount of output, it is best used when checking a single host at a time, like so:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>ansible-playbook foo.yml --check --diff --limit foo.example.com
</pre></div>
</div>
</div>
</div>


    </div><!-- END ARTICLE CONTENT AREA -->
</div> <!-- class=row -->
</div> <!-- class=container -->

<?php get_footer('home'); ?>