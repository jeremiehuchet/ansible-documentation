

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Google Tag Manager Data Layer -->
  <script>
   dataLayer = [];
  </script>
  <!-- End Google Tag Manager Data Layer -->

  
  <title>Jinja2 ‘ipaddr()’ filter &mdash; Ansible v1.9.1-0.1.rc1 Documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>
  <link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.min.css' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'./',
        VERSION:'0.01',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  false
      };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.min.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
    <link rel="top" title="Ansible v1.9.1-0.1.rc1 Documentation" href="index.html"/> 

  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

  <style>
    .search-reset-start {
        color: #463E3F;
        float: right;
        position: relative;
        top: -25px;
        left: -10px;
        z-index: 10;
     }
     .search-reset-start:hover {
        cursor: pointer;
        color: #2980B9;
     }
     #search-box-id {
        padding-right: 25px;
     }
  </style>

</head>

<body class="wy-body-for-nav">

  <!-- Google Tag Manager -->
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PSB293" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-PSB293');</script>
  <!-- End Google Tag Manager -->

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div style='background-color:#64C5C7'>
        <br/>
        <center><a href="index.html"><img src="http://cdn2.hubspot.net/hub/330046/file-445792629-png/ANSI_logotype_web_white.png" style="border-radius:0;background-color:#64C5C7;width:214px;height:26px;margin:'auto auto auto auto'"></a></center>
        <br/>      
      </div>
      <div class="wy-side-nav-search" style="background-color:#64C5C7;height=80px;margin:'auto auto auto auto'">
        <!-- <a href="index.html" class="icon icon-home"> Ansible Documentation</a> -->
        <!-- <form class="wy-form" action="search.html" method="get">
  <input type="text" name="q" placeholder="Search docs" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form> -->

<script>
  (function() {
    var cx = '006019874985968165468:eu5pbnxp4po';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>

<form id="search-form-id" action="">
  <input type="text" name="query" id="search-box-id" />
  <a class="search-reset-start" id="search-reset"><i class="fa fa-times"></i></a>
  <a class="search-reset-start" id="search-start"><i class="fa fa-search"></i></a>
</form>

<script type="text/javascript" src="http://www.google.com/cse/brand?form=search-form-id&inputbox=search-box-id"></script>

<script>
  function executeQuery() {
      var input = document.getElementById('search-box-id');
      var element = google.search.cse.element.getElement('searchresults-only0');
      element.resultsUrl = '/htmlout/search.html'
      if (input.value == '') {
          element.clearAllResults();
          $('#page-content, .rst-footer-buttons, #search-start').show();
          $('#search-results, #search-reset').hide();
      } else {
          $('#page-content, .rst-footer-buttons, #search-start').hide();
          $('#search-results, #search-reset').show();
          element.execute(input.value);
      }
      return false;
      }

  $('#search-reset').hide();

  $('#search-box-id').css('background-position', '1em center');

  $('#search-box-id').on('blur', function() {
    $('#search-box-id').css('background-position', '1em center');
  });

  $('#search-start').click(function(e) { executeQuery(); });
  $('#search-reset').click(function(e) { $('#search-box-id').val(''); executeQuery(); });

  $('#search-form-id').submit(function(e) {
      console.log('submitting!');
      executeQuery();
      e.preventDefault();
      });
</script>
      </div>

      <div id="menu-id" class="wy-menu wy-menu-vertical" data-spy="affix">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro_installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_getting_started.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_inventory.html">Inventory</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_dynamic_inventory.html">Dynamic Inventory</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_patterns.html">Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_adhoc.html">Introduction To Ad-Hoc Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_configuration.html">The Ansible Configuration File</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_windows.html">Windows Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart Video</a></li>
<li class="toctree-l1"><a class="reference internal" href="playbooks.html">Playbooks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="playbooks_intro.html">Intro to Playbooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_roles.html">Playbook Roles and Include Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_variables.html">Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_filters.html">Jinja2 filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_conditionals.html">Conditionals</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_loops.html">Loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_best_practices.html">Best Practices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="playbooks_special_topics.html">Playbooks: Special Topics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="playbooks_acceleration.html">Accelerated Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_async.html">Asynchronous Actions and Polling</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_checkmode.html">Check Mode (&#8220;Dry Run&#8221;)</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_delegation.html">Delegation, Rolling Updates, and Local Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_environment.html">Setting the Environment (and Working With Proxies)</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_error_handling.html">Error Handling In Playbooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_lookups.html">Using Lookups</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_prompts.html">Prompts</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_tags.html">Tags</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_vault.html">Vault</a></li>
<li class="toctree-l2"><a class="reference internal" href="playbooks_startnstep.html">Start and Step</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">About Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="modules.html#introduction">Introduction</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="guides.html">Detailed Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="guide_aws.html">Amazon Web Services Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_rax.html">Rackspace Cloud Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_gce.html">Google Cloud Platform Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_vagrant.html">Using Vagrant and Ansible</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide_rolling_upgrade.html">Continuous Delivery and Rolling Upgrades</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_strategies.html">Testing Strategies</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="developing.html">Developer Information</a><ul>
<li class="toctree-l2"><a class="reference internal" href="developing_api.html">Python API</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_inventory.html">Developing Dynamic Inventory Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_modules.html">Developing Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_plugins.html">Developing Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="developing_test_pr.html">Helping Testing PRs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tower.html">Ansible Tower</a></li>
<li class="toctree-l1"><a class="reference internal" href="community.html">Community Information &amp; Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="community.html#ansible-users">Ansible Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="community.html#for-current-and-prospective-developers">For Current and Prospective Developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="community.html#other-topics">Other Topics</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="galaxy.html">Ansible Galaxy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="galaxy.html#the-website">The Website</a></li>
<li class="toctree-l2"><a class="reference internal" href="galaxy.html#the-ansible-galaxy-command-line-tool">The ansible-galaxy command line tool</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="test_strategies.html">Testing Strategies</a><ul>
<li class="toctree-l2"><a class="reference internal" href="test_strategies.html#integrating-testing-with-ansible-playbooks">Integrating Testing With Ansible Playbooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_strategies.html#the-right-level-of-testing">The Right Level of Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_strategies.html#check-mode-as-a-drift-test">Check Mode As A Drift Test</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_strategies.html#modules-that-are-useful-for-testing">Modules That Are Useful for Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_strategies.html#testing-lifecycle">Testing Lifecycle</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_strategies.html#integrating-testing-with-rolling-updates">Integrating Testing With Rolling Updates</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_strategies.html#achieving-continuous-deployment">Achieving Continuous Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_strategies.html#conclusion">Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-handle-different-machines-needing-different-user-accounts-or-ports-to-log-in-with">How do I handle different machines needing different user accounts or ports to log in with?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-get-ansible-to-reuse-connections-enable-kerberized-ssh-or-have-ansible-pay-attention-to-my-local-ssh-config-file">How do I get ansible to reuse connections, enable Kerberized SSH, or have Ansible pay attention to my local SSH config file?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-speed-up-management-inside-ec2">How do I speed up management inside EC2?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-handle-python-pathing-not-having-a-python-2-x-in-usr-bin-python-on-a-remote-machine">How do I handle python pathing not having a Python 2.X in /usr/bin/python on a remote machine?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#what-is-the-best-way-to-make-content-reusable-redistributable">What is the best way to make content reusable/redistributable?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#where-does-the-configuration-file-live-and-what-can-i-configure-in-it">Where does the configuration file live and what can I configure in it?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-disable-cowsay">How do I disable cowsay?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-see-a-list-of-all-of-the-ansible-variables">How do I see a list of all of the ansible_ variables?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-loop-over-a-list-of-hosts-in-a-group-inside-of-a-template">How do I loop over a list of hosts in a group, inside of a template?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-access-a-variable-name-programmatically">How do I access a variable name programmatically?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-access-a-variable-of-the-first-host-in-a-group">How do I access a variable of the first host in a group?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-copy-files-recursively-onto-a-target-host">How do I copy files recursively onto a target host?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-access-shell-environment-variables">How do I access shell environment variables?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-generate-crypted-passwords-for-the-user-module">How do I generate crypted passwords for the user module?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#can-i-get-training-on-ansible-or-find-commercial-support">Can I get training on Ansible or find commercial support?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#is-there-a-web-interface-rest-api-etc">Is there a web interface / REST API / etc?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-submit-a-change-to-the-documentation">How do I submit a change to the documentation?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-do-i-keep-secret-data-in-my-playbook">How do I keep secret data in my playbook?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#i-don-t-see-my-question-here">I don&#8217;t see my question here</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a><ul>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#action">Action</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#ad-hoc">Ad Hoc</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#async">Async</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#callback-plugin">Callback Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#check-mode">Check Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#connection-type-connection-plugin">Connection Type, Connection Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#conditionals">Conditionals</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#diff-mode">Diff Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#facts">Facts</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#filter-plugin">Filter Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#forks">Forks</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#gather-facts-boolean">Gather Facts (Boolean)</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#globbing">Globbing</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#group">Group</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#group-vars">Group Vars</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#handlers">Handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#host">Host</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#host-specifier">Host Specifier</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#host-vars">Host Vars</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#lazy-evaluation">Lazy Evaluation</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#lookup-plugin">Lookup Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#multi-tier">Multi-Tier</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#idempotency">Idempotency</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#includes">Includes</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#inventory">Inventory</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#inventory-script">Inventory Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#jinja2">Jinja2</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#json">JSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#library">Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#limit-groups">Limit Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#local-connection">Local Connection</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#local-action">Local Action</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#loops">Loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#modules">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#notify">Notify</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#orchestration">Orchestration</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#paramiko">paramiko</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#playbooks">Playbooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#plays">Plays</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#pull-mode">Pull Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#push-mode">Push Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#register-variable">Register Variable</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#resource-model">Resource Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#roles">Roles</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#rolling-update">Rolling Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#runner">Runner</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#serial">Serial</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#sudo">Sudo</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#ssh-native">SSH (Native)</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#tags">Tags</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#tasks">Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#templates">Templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#transport">Transport</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#when">When</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#van-halen">Van Halen</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#vars-variables">Vars (Variables)</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html#yaml">YAML</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="YAMLSyntax.html">YAML Syntax</a><ul>
<li class="toctree-l2"><a class="reference internal" href="YAMLSyntax.html#yaml-basics">YAML Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="YAMLSyntax.html#gotchas">Gotchas</a></li>
</ul>
</li>
</ul>

        

<!-- changeable widget -->
<center>
<br/>
<span class="hs-cta-wrapper" id="hs-cta-wrapper-71d47584-8ef5-4b06-87ae-8d25bc2a837e">
    <span class="hs-cta-node hs-cta-71d47584-8ef5-4b06-87ae-8d25bc2a837e" id="hs-cta-71d47584-8ef5-4b06-87ae-8d25bc2a837e">
        <!--[if lte IE 8]><div id="hs-cta-ie-element"></div><![endif]-->
        <a href="http://cta-redirect.hubspot.com/cta/redirect/330046/71d47584-8ef5-4b06-87ae-8d25bc2a837e"><img class="hs-cta-img" id="hs-cta-img-71d47584-8ef5-4b06-87ae-8d25bc2a837e" style="border-width:0px;" src="https://no-cache.hubspot.com/cta/default/330046/71d47584-8ef5-4b06-87ae-8d25bc2a837e.png" /></a>
    </span>
    <script charset="utf-8" src="https://js.hscta.net/cta/current.js"></script>
        <script type="text/javascript">
            hbspt.cta.load(330046, '71d47584-8ef5-4b06-87ae-8d25bc2a837e');
        </script>
</span>
</center>


      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="/">Ansible Documentation</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">

<!-- AnsibleFest and free eBook preview stuff -->
<center>
<a href="http://www.ansible.com/tower?utm_source=docs">
<img src="http://www.ansible.com/hs-fs/hub/330046/file-2031636235-png/DL_Folder/festlondon-docs.png">
</a>
<a href="http://www.ansible.com/ansible-book">
<img src="http://www.ansible.com/hs-fs/hub/330046/file-2031636250-png/DL_Folder/Ebook-docs.png">
</a>
<br/>&nbsp;<br/>
<br/>&nbsp;<br/>
</center>

          <ul class="wy-breadcrumbs">
  <li><a href="index.html">Docs</a> &raquo;</li>
  <li><a href="">Jinja2 &#8216;ipaddr()&#8217; filter</a></li>
  
    <li class="wy-breadcrumbs-aside">
      <a href="https://github.com/ansible/ansible/blob/devel/docsite/rst/playbooks_filters_ipaddr.rst" class="icon icon-github"> Edit on GitHub</a>
    </li>
  
</ul>
<hr/>

          <div id="page-content">
          
  <div class="section" id="jinja2-ipaddr-filter">
<h1>Jinja2 &#8216;ipaddr()&#8217; filter<a class="headerlink" href="#jinja2-ipaddr-filter" title="Permalink to this headline">¶</a></h1>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.9.</span></p>
</div>
<p><code class="docutils literal"><span class="pre">ipaddr()</span></code> is a Jinja2 filter designed to provide an interface to <a class="reference external" href="https://pypi.python.org/pypi/netaddr">netaddr</a>
Python package from within Ansible. It can operate on strings or lists of
items, test various data to check if they are valid IP addresses and manipulate
the input data to extract requested information. <code class="docutils literal"><span class="pre">ipaddr()</span></code> works both with
IPv4 and IPv6 addresses in various forms, there are also additional functions
available to manipulate IP subnets and MAC addresses.</p>
<p>To use this filter in Ansible, you need to install <a class="reference external" href="https://pypi.python.org/pypi/netaddr">netaddr</a> Python library on
a computer on which you use Ansible (it is not required on remote hosts).
It can usually be installed either via your system package manager, or using
<code class="docutils literal"><span class="pre">pip</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>pip install netaddr
</pre></div>
</div>
<div class="contents local topic" id="topics">
<p class="topic-title first">Topics</p>
<ul class="simple">
<li><a class="reference internal" href="#basic-tests" id="id1">Basic tests</a></li>
<li><a class="reference internal" href="#filtering-lists" id="id2">Filtering lists</a></li>
<li><a class="reference internal" href="#wrapping-ipv6-addresses-in-brackets" id="id3">Wrapping IPv6 addresses in [ ] brackets</a></li>
<li><a class="reference internal" href="#basic-queries" id="id4">Basic queries</a></li>
<li><a class="reference internal" href="#getting-information-about-hosts-and-networks" id="id5">Getting information about hosts and networks</a></li>
<li><a class="reference internal" href="#getting-information-from-host-prefix-values" id="id6">Getting information from host/prefix values</a></li>
<li><a class="reference internal" href="#ip-address-conversion" id="id7">IP address conversion</a></li>
<li><a class="reference internal" href="#converting-ipv4-address-to-6to4-address" id="id8">Converting IPv4 address to 6to4 address</a></li>
<li><a class="reference internal" href="#subnet-manipulation" id="id9">Subnet manipulation</a></li>
<li><a class="reference internal" href="#mac-address-filter" id="id10">MAC address filter</a></li>
</ul>
</div>
<div class="section" id="basic-tests">
<h2><a class="toc-backref" href="#topics">Basic tests</a><a class="headerlink" href="#basic-tests" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">ipaddr()</span></code> is designed to return the input value if a query is True, and
<code class="docutils literal"><span class="pre">False</span></code> if query is False. This way it can be very easily used in chained
filters. To use the filter, pass a string to it:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="s1">&#39;192.0.2.0&#39;</span> <span class="o">|</span> <span class="n">ipaddr</span> <span class="p">}}</span>
</pre></div>
</div>
<p>You can also pass the values as variables:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="n">myvar</span> <span class="o">|</span> <span class="n">ipaddr</span> <span class="p">}}</span>
</pre></div>
</div>
<p>Here are some example tests of various input strings:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span># These values are valid IP addresses or network ranges
&#39;192.168.0.1&#39;       -&gt; 192.168.0.1
&#39;192.168.32.0/24&#39;   -&gt; 192.168.32.0/24
&#39;fe80::100/10&#39;      -&gt; fe80::100/10
45443646733         -&gt; ::a:94a7:50d
&#39;523454/24&#39;         -&gt; 0.7.252.190/24

# Values that are not valid IP addresses or network ranges:
&#39;localhost&#39;         -&gt; False
True                -&gt; False
&#39;space bar&#39;         -&gt; False
False               -&gt; False
&#39;&#39;                  -&gt; False
&#39;:&#39;                 -&gt; False
&#39;fe80:/10&#39;          -&gt; False
</pre></div>
</div>
<p>Sometimes you need either IPv4 or IPv6 addresses. To filter only for particular
type, <code class="docutils literal"><span class="pre">ipaddr()</span></code> filter has two &#8220;aliases&#8221;, <code class="docutils literal"><span class="pre">ipv4()</span></code> and <code class="docutils literal"><span class="pre">ipv6()</span></code>.</p>
<p>Example us of an IPv4 filter:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="n">myvar</span> <span class="o">|</span> <span class="n">ipv4</span> <span class="p">}}</span>
</pre></div>
</div>
<p>And similar example of an IPv6 filter:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="n">myvar</span> <span class="o">|</span> <span class="n">ipv6</span> <span class="p">}}</span>
</pre></div>
</div>
<p>Here&#8217;s an example test to look for IPv4 addresses:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>&#39;192.168.0.1&#39;       -&gt; 192.168.0.1
&#39;192.168.32.0/24&#39;   -&gt; 192.168.32.0/24
&#39;fe80::100/10&#39;      -&gt; False
45443646733         -&gt; False
&#39;523454/24&#39;         -&gt; 0.7.252.190/24
</pre></div>
</div>
<p>And the same data filtered for IPv6 addresses:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>&#39;192.168.0.1&#39;       -&gt; False
&#39;192.168.32.0/24&#39;   -&gt; False
&#39;fe80::100/10&#39;      -&gt; fe80::100/10
45443646733         -&gt; ::a:94a7:50d
&#39;523454/24&#39;         -&gt; False
</pre></div>
</div>
</div>
<div class="section" id="filtering-lists">
<h2><a class="toc-backref" href="#topics">Filtering lists</a><a class="headerlink" href="#filtering-lists" title="Permalink to this headline">¶</a></h2>
<p>You can filter entire lists - <code class="docutils literal"><span class="pre">ipaddr()</span></code> will return a list with values
valid for a particular query:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Example list of values</span>
<span class="n">test_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;192.24.2.1&#39;</span><span class="p">,</span> <span class="s1">&#39;host.fqdn&#39;</span><span class="p">,</span> <span class="s1">&#39;::1&#39;</span><span class="p">,</span> <span class="s1">&#39;192.168.32.0/24&#39;</span><span class="p">,</span> <span class="s1">&#39;fe80::100/10&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;42540766412265424405338506004571095040/64&#39;</span><span class="p">]</span>

<span class="c1"># {{ test_list | ipaddr }}</span>
<span class="p">[</span><span class="s1">&#39;192.24.2.1&#39;</span><span class="p">,</span> <span class="s1">&#39;::1&#39;</span><span class="p">,</span> <span class="s1">&#39;192.168.32.0/24&#39;</span><span class="p">,</span> <span class="s1">&#39;fe80::100/10&#39;</span><span class="p">,</span> <span class="s1">&#39;2001:db8:32c:faad::/64&#39;</span><span class="p">]</span>

<span class="c1"># {{ test_list | ipv4 }}</span>
<span class="p">[</span><span class="s1">&#39;192.24.2.1&#39;</span><span class="p">,</span> <span class="s1">&#39;192.168.32.0/24&#39;</span><span class="p">]</span>

<span class="c1"># {{ test_list | ipv6 }}</span>
<span class="p">[</span><span class="s1">&#39;::1&#39;</span><span class="p">,</span> <span class="s1">&#39;fe80::100/10&#39;</span><span class="p">,</span> <span class="s1">&#39;2001:db8:32c:faad::/64&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="wrapping-ipv6-addresses-in-brackets">
<h2><a class="toc-backref" href="#topics">Wrapping IPv6 addresses in [ ] brackets</a><a class="headerlink" href="#wrapping-ipv6-addresses-in-brackets" title="Permalink to this headline">¶</a></h2>
<p>Some configuration files require IPv6 addresses to be &#8220;wrapped&#8221; in square
brackets (<code class="docutils literal"><span class="pre">[</span> <span class="pre">]</span></code>). To accomplish that, you can use <code class="docutils literal"><span class="pre">ipwrap()</span></code> filter. It
will wrap all IPv6 addresses and leave any other strings intact:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># {{ test_list | ipwrap }}</span>
<span class="p">[</span><span class="s1">&#39;192.24.2.1&#39;</span><span class="p">,</span> <span class="s1">&#39;host.fqdn&#39;</span><span class="p">,</span> <span class="s1">&#39;[::1]&#39;</span><span class="p">,</span> <span class="s1">&#39;192.168.32.0/24&#39;</span><span class="p">,</span> <span class="s1">&#39;[fe80::100]/10&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;[2001:db8:32c:faad::]/64&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>As you can see, <code class="docutils literal"><span class="pre">ipwrap()</span></code> did not filter out non-IP address values, which is
usually what you want when for example you are mixing IP addresses with
hostnames. If you still want to filter out all non-IP address values, you can
chain both filters together:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># {{ test_list | ipaddr | ipwrap }}</span>
<span class="p">[</span><span class="s1">&#39;192.24.2.1&#39;</span><span class="p">,</span> <span class="s1">&#39;[::1]&#39;</span><span class="p">,</span> <span class="s1">&#39;192.168.32.0/24&#39;</span><span class="p">,</span> <span class="s1">&#39;[fe80::100]/10&#39;</span><span class="p">,</span> <span class="s1">&#39;[2001:db8:32c:faad::]/64&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="basic-queries">
<h2><a class="toc-backref" href="#topics">Basic queries</a><a class="headerlink" href="#basic-queries" title="Permalink to this headline">¶</a></h2>
<p>You can provide single argument to each <code class="docutils literal"><span class="pre">ipaddr()</span></code> filter. Filter will then
treat it as a query and return values modified by that query. Lists will
contain only values that you are querying for.</p>
<p>Types of queries include:</p>
<ul class="simple">
<li>query by name: <code class="docutils literal"><span class="pre">ipaddr('address')</span></code>, <code class="docutils literal"><span class="pre">ipv4('network')</span></code>;</li>
<li>query by CIDR range: <code class="docutils literal"><span class="pre">ipaddr('192.168.0.0/24')</span></code>, <code class="docutils literal"><span class="pre">ipv6('2001:db8::/32')</span></code>;</li>
<li>query by index number: <code class="docutils literal"><span class="pre">ipaddr('1')</span></code>, <code class="docutils literal"><span class="pre">ipaddr('-1')</span></code>;</li>
</ul>
<p>If a query type is not recognized, Ansible will raise an error.</p>
</div>
<div class="section" id="getting-information-about-hosts-and-networks">
<h2><a class="toc-backref" href="#topics">Getting information about hosts and networks</a><a class="headerlink" href="#getting-information-about-hosts-and-networks" title="Permalink to this headline">¶</a></h2>
<p>Here&#8217;s our test list again:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Example list of values</span>
<span class="n">test_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;192.24.2.1&#39;</span><span class="p">,</span> <span class="s1">&#39;host.fqdn&#39;</span><span class="p">,</span> <span class="s1">&#39;::1&#39;</span><span class="p">,</span> <span class="s1">&#39;192.168.32.0/24&#39;</span><span class="p">,</span> <span class="s1">&#39;fe80::100/10&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;42540766412265424405338506004571095040/64&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Lets take above list and get only those elements that are host IP addresses,
and not network ranges:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># {{ test_list | ipaddr(&#39;address&#39;) }}</span>
<span class="p">[</span><span class="s1">&#39;192.24.2.1&#39;</span><span class="p">,</span> <span class="s1">&#39;::1&#39;</span><span class="p">,</span> <span class="s1">&#39;fe80::100&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>As you can see, even though some values had a host address with a CIDR prefix,
it was dropped by the filter. If you want host IP addresses with their correct
CIDR prefixes (as is common with IPv6 addressing), you can use
<code class="docutils literal"><span class="pre">ipaddr('host')</span></code> filter:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># {{ test_list | ipaddr(&#39;host&#39;) }}</span>
<span class="p">[</span><span class="s1">&#39;192.24.2.1/32&#39;</span><span class="p">,</span> <span class="s1">&#39;::1/128&#39;</span><span class="p">,</span> <span class="s1">&#39;fe80::100/10&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Filtering by IP address types also works:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># {{ test_list | ipv4(&#39;address&#39;) }}</span>
<span class="p">[</span><span class="s1">&#39;192.24.2.1&#39;</span><span class="p">]</span>

<span class="c1"># {{ test_list | ipv6(&#39;address&#39;) }}</span>
<span class="p">[</span><span class="s1">&#39;::1&#39;</span><span class="p">,</span> <span class="s1">&#39;fe80::100&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>You can check if IP addresses or network ranges are accessible on a public
Internet, or if they are in private networks:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># {{ test_list | ipaddr(&#39;public&#39;) }}</span>
<span class="p">[</span><span class="s1">&#39;192.24.2.1&#39;</span><span class="p">,</span> <span class="s1">&#39;2001:db8:32c:faad::/64&#39;</span><span class="p">]</span>

<span class="c1"># {{ test_list | ipaddr(&#39;private&#39;) }}</span>
<span class="p">[</span><span class="s1">&#39;192.168.32.0/24&#39;</span><span class="p">,</span> <span class="s1">&#39;fe80::100/10&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>You can check which values are specifically network ranges:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># {{ test_list | ipaddr(&#39;net&#39;) }}</span>
<span class="p">[</span><span class="s1">&#39;192.168.32.0/24&#39;</span><span class="p">,</span> <span class="s1">&#39;2001:db8:32c:faad::/64&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>You can also check how many IP addresses can be in a certain range:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># {{ test_list | ipaddr(&#39;net&#39;) | ipaddr(&#39;size&#39;) }}</span>
<span class="p">[</span><span class="mi">256</span><span class="p">,</span> <span class="il">18446744073709551616L</span><span class="p">]</span>
</pre></div>
</div>
<p>By specifying a network range as a query, you can check if given value is in
that range:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># {{ test_list | ipaddr(&#39;192.0.0.0/8&#39;) }}</span>
<span class="p">[</span><span class="s1">&#39;192.24.2.1&#39;</span><span class="p">,</span> <span class="s1">&#39;192.168.32.0/24&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>If you specify a positive or negative integer as a query, <code class="docutils literal"><span class="pre">ipaddr()</span></code> will
treat this as an index and will return specific IP address from a network
range, in the &#8216;host/prefix&#8217; format:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># First IP address (network address)</span>
<span class="c1"># {{ test_list | ipaddr(&#39;net&#39;) | ipaddr(&#39;0&#39;) }}</span>
<span class="p">[</span><span class="s1">&#39;192.168.32.0/24&#39;</span><span class="p">,</span> <span class="s1">&#39;2001:db8:32c:faad::/64&#39;</span><span class="p">]</span>

<span class="c1"># Second IP address (usually gateway host)</span>
<span class="c1"># {{ test_list | ipaddr(&#39;net&#39;) | ipaddr(&#39;1&#39;) }}</span>
<span class="p">[</span><span class="s1">&#39;192.168.32.1/24&#39;</span><span class="p">,</span> <span class="s1">&#39;2001:db8:32c:faad::1/64&#39;</span><span class="p">]</span>

<span class="c1"># Last IP address (broadcast in IPv4 networks)</span>
<span class="c1"># {{ test_list | ipaddr(&#39;net&#39;) | ipaddr(&#39;-1&#39;) }}</span>
<span class="p">[</span><span class="s1">&#39;192.168.32.255/24&#39;</span><span class="p">,</span> <span class="s1">&#39;2001:db8:32c:faad:ffff:ffff:ffff:ffff/64&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>You can also select IP addresses from a range by their index, from the start or
end of the range:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># {{ test_list | ipaddr(&#39;net&#39;) | ipaddr(&#39;200&#39;) }}</span>
<span class="p">[</span><span class="s1">&#39;192.168.32.200/24&#39;</span><span class="p">,</span> <span class="s1">&#39;2001:db8:32c:faad::c8/64&#39;</span><span class="p">]</span>

<span class="c1"># {{ test_list | ipaddr(&#39;net&#39;) | ipaddr(&#39;-200&#39;) }}</span>
<span class="p">[</span><span class="s1">&#39;192.168.32.56/24&#39;</span><span class="p">,</span> <span class="s1">&#39;2001:db8:32c:faad:ffff:ffff:ffff:ff38/64&#39;</span><span class="p">]</span>

<span class="c1"># {{ test_list | ipaddr(&#39;net&#39;) | ipaddr(&#39;400&#39;) }}</span>
<span class="p">[</span><span class="s1">&#39;2001:db8:32c:faad::190/64&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="getting-information-from-host-prefix-values">
<h2><a class="toc-backref" href="#topics">Getting information from host/prefix values</a><a class="headerlink" href="#getting-information-from-host-prefix-values" title="Permalink to this headline">¶</a></h2>
<p>Very frequently you use combination of IP addresses and subnet prefixes
(&#8220;CIDR&#8221;), this is even more common with IPv6. <code class="docutils literal"><span class="pre">ipaddr()</span></code> filter can extract
useful data from these prefixes.</p>
<p>Here&#8217;s an example set of two host prefixes (with some &#8220;control&#8221; values):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">host_prefix</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;2001:db8:deaf:be11::ef3/64&#39;</span><span class="p">,</span> <span class="s1">&#39;192.0.2.48/24&#39;</span><span class="p">,</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="s1">&#39;192.168.0.0/16&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>First, let&#8217;s make sure that we only work with correct host/prefix values, not
just subnets or single IP addresses:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># {{ test_list | ipaddr(&#39;host/prefix&#39;) }}</span>
<span class="p">[</span><span class="s1">&#39;2001:db8:deaf:be11::ef3/64&#39;</span><span class="p">,</span> <span class="s1">&#39;192.0.2.48/24&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>In Debian-based systems, network configuration stored in <code class="docutils literal"><span class="pre">/etc/network/interfaces</span></code> file uses combination of IP address, network address, netmask and broadcast address to configure IPv4 network interface. We can get these values from single &#8216;host/prefix&#8217; combination:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span># Jinja2 template
{% set ipv4_host = host_prefix | unique | ipv4(&#39;host/prefix&#39;) | first %}
iface eth0 inet static
    address   {{ ipv4_host | ipaddr(&#39;address&#39;) }}
    network   {{ ipv4_host | ipaddr(&#39;network&#39;) }}
    netmask   {{ ipv4_host | ipaddr(&#39;netmask&#39;) }}
    broadcast {{ ipv4_host | ipaddr(&#39;broadcast&#39;) }}

# Generated configuration file
iface eth0 inet static
    address   192.0.2.48
    network   192.0.2.0
    netmask   255.255.255.0
    broadcast 192.0.2.255
</pre></div>
</div>
<p>In above example, we needed to handle the fact that values were stored in
a list, which is unusual in IPv4 networks, where only single IP address can be
set on an interface. However, IPv6 networks can have multiple IP addresses set
on an interface:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span># Jinja2 template
iface eth0 inet6 static
  {% set ipv6_list = host_prefix | unique | ipv6(&#39;host/prefix&#39;) %}
  address {{ ipv6_list[0] }}
  {% if ipv6_list | length &gt; 1 %}
  {% for subnet in ipv6_list[1:] %}
  up   /sbin/ip address add {{ subnet }} dev eth0
  down /sbin/ip address del {{ subnet }} dev eth0
  {% endfor %}
  {% endif %}

# Generated configuration file
iface eth0 inet6 static
  address 2001:db8:deaf:be11::ef3/64
</pre></div>
</div>
<p>If needed, you can extract subnet and prefix information from &#8216;host/prefix&#8217; value:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># {{ host_prefix | ipaddr(&#39;host/prefix&#39;) | ipaddr(&#39;subnet&#39;) }}</span>
<span class="p">[</span><span class="s1">&#39;2001:db8:deaf:be11::/64&#39;</span><span class="p">,</span> <span class="s1">&#39;192.0.2.0/24&#39;</span><span class="p">]</span>

<span class="c1"># {{ host_prefix | ipaddr(&#39;host/prefix&#39;) | ipaddr(&#39;prefix&#39;) }}</span>
<span class="p">[</span><span class="mi">64</span><span class="p">,</span> <span class="mi">24</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="ip-address-conversion">
<h2><a class="toc-backref" href="#topics">IP address conversion</a><a class="headerlink" href="#ip-address-conversion" title="Permalink to this headline">¶</a></h2>
<p>Here&#8217;s our test list again:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Example list of values</span>
<span class="n">test_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;192.24.2.1&#39;</span><span class="p">,</span> <span class="s1">&#39;host.fqdn&#39;</span><span class="p">,</span> <span class="s1">&#39;::1&#39;</span><span class="p">,</span> <span class="s1">&#39;192.168.32.0/24&#39;</span><span class="p">,</span> <span class="s1">&#39;fe80::100/10&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;42540766412265424405338506004571095040/64&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>You can convert IPv4 addresses into IPv6 addresses:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># {{ test_list | ipv4(&#39;ipv6&#39;) }}</span>
<span class="p">[</span><span class="s1">&#39;::ffff:192.24.2.1/128&#39;</span><span class="p">,</span> <span class="s1">&#39;::ffff:192.168.32.0/120&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Converting from IPv6 to IPv4 works very rarely:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># {{ test_list | ipv6(&#39;ipv4&#39;) }}</span>
<span class="p">[</span><span class="s1">&#39;0.0.0.1/32&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>But we can make double conversion if needed:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># {{ test_list | ipaddr(&#39;ipv6&#39;) | ipaddr(&#39;ipv4&#39;) }}</span>
<span class="p">[</span><span class="s1">&#39;192.24.2.1/32&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0.0.1/32&#39;</span><span class="p">,</span> <span class="s1">&#39;192.168.32.0/24&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>You can convert IP addresses to integers, the same way that you can convert
integers into IP addresses:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># {{ test_list | ipaddr(&#39;address&#39;) | ipaddr(&#39;int&#39;) }}</span>
<span class="p">[</span><span class="mi">3222798849</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;3232243712/24&#39;</span><span class="p">,</span> <span class="s1">&#39;338288524927261089654018896841347694848/10&#39;</span><span class="p">,</span> <span class="s1">&#39;42540766412265424405338506004571095040/64&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>You can convert IP addresses to PTR records:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span># {% for address in test_list | ipaddr %}
# {{ address | ipaddr(&#39;revdns&#39;) }}
# {% endfor %}
1.2.24.192.in-addr.arpa.
1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa.
0.32.168.192.in-addr.arpa.
0.0.1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.8.e.f.ip6.arpa.
0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.d.a.a.f.c.2.3.0.8.b.d.0.1.0.0.2.ip6.arpa.
</pre></div>
</div>
</div>
<div class="section" id="converting-ipv4-address-to-6to4-address">
<h2><a class="toc-backref" href="#topics">Converting IPv4 address to 6to4 address</a><a class="headerlink" href="#converting-ipv4-address-to-6to4-address" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/6to4">6to4</a> tunnel is a way to access IPv6 Internet from IPv4-only network. If you
have a public IPv4 address, you automatically can configure it&#8217;s IPv6
equivalent in <code class="docutils literal"><span class="pre">2002::/16</span></code> network range - after conversion you will gain
access to a <code class="docutils literal"><span class="pre">2002:xxxx:xxxx::/48</span></code> subnet which could be split into 65535
<code class="docutils literal"><span class="pre">/64</span></code> subnets if needed.</p>
<p>To convert your IPv4 address, just send it through <code class="docutils literal"><span class="pre">'6to4'</span></code> filter. It will
be automatically converted to a router address (with <code class="docutils literal"><span class="pre">::1/48</span></code> host address):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span># {{ &#39;193.0.2.0&#39; | ipaddr(&#39;6to4&#39;) }}
2002:c100:0200::1/48
</pre></div>
</div>
</div>
<div class="section" id="subnet-manipulation">
<h2><a class="toc-backref" href="#topics">Subnet manipulation</a><a class="headerlink" href="#subnet-manipulation" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">ipsubnet()</span></code> filter can be used to manipulate network subnets in several ways.</p>
<p>Here is some example IP address and subnet:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">address</span> <span class="o">=</span> <span class="s1">&#39;192.168.144.5&#39;</span>
<span class="n">subnet</span>  <span class="o">=</span> <span class="s1">&#39;192.168.0.0/16&#39;</span>
</pre></div>
</div>
<p>To check if a given string is a subnet, pass it through the filter without any
arguments. If given string is an IP address, it will be converted into
a subnet:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span># {{ address | ipsubnet }}
192.168.144.5/32

# {{ subnet | ipsubnet }}
192.168.0.0/16
</pre></div>
</div>
<p>If you specify a subnet size as first parameter of <code class="docutils literal"><span class="pre">ipsubnet()</span></code> filter, and
subnet size is <strong>smaller than current one</strong>, you will get number of subnets
a given subnet can be split into:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># {{ subnet | ipsubnet(20) }}</span>
<span class="mi">16</span>
</pre></div>
</div>
<p>Second argument of <code class="docutils literal"><span class="pre">ipsubnet()</span></code> filter is an index number; by specifying it
you can get new subnet with specified size:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span># First subnet
# {{ subnet | ipsubnet(20, 0) }}
192.168.0.0/20

# Last subnet
# {{ subnet | ipsubnet(20, -1) }}
192.168.240.0/20

# Fifth subnet
# {{ subnet | ipsubnet(20, 5) }}
192.168.80.0/20

# Fifth to last subnet
# {{ subnet | ipsubnet(20, -5) }}
192.168.176.0/20
</pre></div>
</div>
<p>If you specify an IP address instead of a subnet, and give a subnet size as
a first argument, <code class="docutils literal"><span class="pre">ipsubnet()</span></code> filter will instead return biggest subnet that
contains a given IP address:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span># {{ address | ipsubnet(20) }}
192.168.128.0/18
</pre></div>
</div>
<p>By specifying an index number as a second argument, you can select smaller and
smaller subnets:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span># First subnet
# {{ subnet | ipsubnet(18, 0) }}
192.168.128.0/18

# Last subnet
# {{ subnet | ipsubnet(18, -1) }}
192.168.144.4/31

# Fifth subnet
# {{ subnet | ipsubnet(18, 5) }}
192.168.144.0/23

# Fifth to last subnet
# {{ subnet | ipsubnet(18, -5) }}
192.168.144.0/27
</pre></div>
</div>
<p>You can use <code class="docutils literal"><span class="pre">ipsubnet()</span></code> filter with <code class="docutils literal"><span class="pre">ipaddr()</span></code> filter to for example split
given <code class="docutils literal"><span class="pre">/48</span></code> prefix into smaller, <code class="docutils literal"><span class="pre">/64</span></code> subnets:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span># {{ &#39;193.0.2.0&#39; | ipaddr(&#39;6to4&#39;) | ipsubnet(64, 58820) | ipaddr(&#39;1&#39;) }}
2002:c100:200:e5c4::1/64
</pre></div>
</div>
<p>Because of the size of IPv6 subnets, iteration over all of them to find the
correct one may take some time on slower computers, depending on the size
difference between subnets.</p>
</div>
<div class="section" id="mac-address-filter">
<h2><a class="toc-backref" href="#topics">MAC address filter</a><a class="headerlink" href="#mac-address-filter" title="Permalink to this headline">¶</a></h2>
<p>You can use <code class="docutils literal"><span class="pre">hwaddr()</span></code> filter to check if a given string is a MAC address or
convert it between various formats. Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span># Example MAC address
macaddress = &#39;1a:2b:3c:4d:5e:6f&#39;

# Check if given string is a MAC address
# {{ macaddress | hwaddr }}
1a:2b:3c:4d:5e:6f

# Convert MAC address to PostgreSQL format
# {{ macaddress | hwaddr(&#39;pgsql&#39;) }}
1a2b3c:4d5e6f

# Convert MAC address to Cisco format
# {{ macaddress | hwaddr(&#39;cisco&#39;) }}
1a2b.3c4d.5e6f
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="playbooks.html"><em>Playbooks</em></a></dt>
<dd>An introduction to playbooks</dd>
<dt><a class="reference internal" href="playbooks_filters.html"><em>Jinja2 filters</em></a></dt>
<dd>Introduction to Jinja2 filters and their uses</dd>
<dt><a class="reference internal" href="playbooks_conditionals.html"><em>Conditionals</em></a></dt>
<dd>Conditional statements in playbooks</dd>
<dt><a class="reference internal" href="playbooks_variables.html"><em>Variables</em></a></dt>
<dd>All about variables</dd>
<dt><a class="reference internal" href="playbooks_loops.html"><em>Loops</em></a></dt>
<dd>Looping in playbooks</dd>
<dt><a class="reference internal" href="playbooks_roles.html"><em>Playbook Roles and Include Statements</em></a></dt>
<dd>Playbook organization by roles</dd>
<dt><a class="reference internal" href="playbooks_best_practices.html"><em>Best Practices</em></a></dt>
<dd>Best practices in playbooks</dd>
<dt><a class="reference external" href="http://groups.google.com/group/ansible-devel">User Mailing List</a></dt>
<dd>Have a question?  Stop by the google group!</dd>
<dt><a class="reference external" href="http://irc.freenode.net">irc.freenode.net</a></dt>
<dd>#ansible IRC chat channel</dd>
</dl>
</div>
</div>
</div>


          </div>
          <div id="search-results"><gcse:searchresults-only></div>
          <footer>
  

  <hr/>

  <p>
  &copy; Copyright 2015 <a href="http://ansible.com">Ansible, Inc.</a>.
    Last updated on Feb 24, 2016.
  </p>

Ansible docs are generated from <a href="http://github.com/ansible/ansible">GitHub sources</A> using <A HREF="http://sphinx-doc.org/">Sphinx</A> using a theme provided by <a href="http://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  


<!-- begin analytics -->
<script type="text/javascript">
var _hsq = _hsq || [];
_hsq.push(["setContentType", "standard-page"]);
        (function(d,s,i,r) {
        if (d.getElementById(i)){return;}
        var n = d.createElement(s),e = document.getElementsByTagName(s)[0];
        n.id=i;n.src = '//js.hs-analytics.net/analytics/'+(Math.ceil(new Date()/r)*r)+'/330046.js';
        e.parentNode.insertBefore(n, e);
        })(document, "script", "hs-analytics",300000);
</script>
<!-- end analytics -->

</body>
</html>